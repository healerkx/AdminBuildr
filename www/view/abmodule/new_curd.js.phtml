<script>
    $class('Dialog', null, {
        showDialog: function(context, e) {
            var _thisDialog = this;
            var callback = function() {
                if (_thisDialog.save()) {
                    this.hide();
                }
            };

            var h = this.template;
            var href = '#' + h.replace('/', '_');
            var target = $(href && href.replace(/.*(?=#[^\s]+$)/, '')); //strip for ie7
            var option = $.extend({ remote: !/#/.test(href) && href }, {'onOk': callback});
            e && e.preventDefault();
            target.modal(option);
        }

    });

    $class('TextDialog', Dialog, {

        template:'abmodule/dialog-select',

        show: function (context, e) {
            // TODO: fill data into dom.
            this.showDialog(context, e);
        },

        save: function () {
            console.log("Save", this);
            return true;
        }
    });

    $class('SelectDialog', Dialog, {

        template:'abmodule/dialog-select',

        show: function (context, e) {
            // TODO: fill data into dom.
            var list = Widget.widgetById('entry-edit-list');
            console.log(list);
            if (list) {
                list.init();
            }
            this.showDialog(context, e);
        },

        save: function () {
            console.log("Save", this);
            return true;
        }
    });


</script>